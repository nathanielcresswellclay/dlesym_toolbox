# General params 
experiment_name: Forced Climatology
toolbox_dir: /pscratch/sd/n/nacc/dlesym_toolbox
output_dir: /pscratch/sd/n/nacc/dlesym_toolbox/analysis_example_outputs
gpus:
  - 0
n_proc: 1
run_inference: False
run_analysis: True
  
# Forced historical climatology analysis configuration
analyses:
  - name: Forced Climatology
    output_subdir: ${output_dir}/forced_sm_climatology
    # parameters used to run forecasts for analysis. experiment_name is 
    # the name of the module in forecast_experiments/
    inference_params:
      experiment_name: forced_historical_simulation
      # logs and std outputs for inference are saved here
      output_log: ${output_dir}/forced_sm_climatology/inference.log
      # added to python path for inference
      mounted_modules:
        - /pscratch/sd/n/nacc/modulus-uw-dltm
        - /pscratch/sd/n/nacc/NV-dlesm_ncresswell
        - /pscratch/sd/n/nacc/dlesym_toolbox
      models:
        - /pscratch/sd/n/nacc/models/dltm_v2
      # this is the start of the forced run
      init_time: 1984-01-01
      # init end time is the end of the forced run
      end_time: 2004-01-01
      # config is temporary for launching subprocesses
      config_cache: ${output_dir}/forced_climatology.yaml
      overwrite_forecast: False
    analysis_params:
      # name of analysis module 
      analysis_name: forced_sm_climatology
      # logs and std outputs for inference are saved here
      output_log: ${output_dir}/forced_sm_climatology/analysis.log
      # added to python path for analysis
      mounted_modules:
        - /pscratch/sd/n/nacc/dlesym_toolbox
        - /pscratch/sd/n/nacc/DLESyM
      # conda environment for analysis
      conda_env: /pscratch/sd/n/nacc/miniconda/envs/dlesym-0.1
      # verification data for analysis
      verification_file: /pscratch/sd/n/nacc/training_data/hpx64_1979-2021_3h_dltm-v2.zarr
      # parameters specific to each forecast, IDs are used to name output plots
      forecast_params:
        - file: /pscratch/sd/n/nacc/models/dltm_v2/forecasts/forecast_forced_historical_1984.01.01-2004.01.01.nc
          model_id: dltm_v2
      # plots go here
      output_directory: ${output_dir}/forced_sm_climatology/
      # another temporary config for launching subprocesses
      config_cache: ${output_dir}/forced_sm_climatology.yaml